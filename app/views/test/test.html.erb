<head>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.11.3/jquery.min.js"></script>
</head>
<body>
    <h1>This is a test</h1>
    <p>Welcome <%= @current_user.first_name %> with ID of <%= @current_user.id %></p>
    <% @check_list.user_id = @current_user.id %>
    <div id="div1"></div>
    <select class="popdown" id="pop">
    <% @colleges.each do |college| %>
        <option class="college-choice"><%= college.name %></option>
    <% end %>
   </select>

    <ul>
        <% @colleges.each do |college| %>
        <li>  
        <% college_name = college.name %>
        <div class = "container <%= college_name %>">    
            <h1>Checklist for <%= college_name %></h1>
            <h2>Current user id is <%= current_user.id %></h2>
                <%= form_for @check_list do |f| %>
                <div class = "row">
                    <div class="col-xs-2">Deadline</div>
                    <div class="col-xs-2"><%= f.date_field :deadline, :placeholder => "Deadline" %></div>
                    <div class="col-xs-2">Transcript?</div>
                    <div class="col-xs-2"><%= f.text_field :transcript, :placeholder => "True or False" %></div>
                    <div class="col-xs-2">Essay?</div>
                    <div class="col-xs-2"><%= f.text_field :essay, :placeholder => "True or False" %></div>
                </div>
                <div class="row">
                    <div class="col-xs-2">S.A.T.?</div>
                    <div class="col-xs-2"><%= f.text_field :sat, :placeholder => "True or False" %></div>
                    <div class="col-xs-2">A.C.T.?</div>
                    <div class="col-xs-2"><%= f.text_field :act, :placeholder => "True or False" %></div>
                    <div class="col-xs-2">Applicaiton?</div>
                    <div class="col-xs-2"><%= f.text_field :application, :placeholder => "True or False" %></div>
                </div>
                <div class="row">
                    <div class="col-xs-2">College Tour Date</div>
                    <div class="col-xs-2"><%= f.date_field :tour_date, :placeholder => "College Tour Date" %></div>
                    <div class="col-xs-2">Rec Letters?</div>
                    <div class="col-xs-2"><%= f.text_field :rec_letters, :placeholder => "True or False" %></div>
                    <div class="col-xs-2">Early Accept?</div>
                    <div class="col-xs-2"><%= f.text_field :early_acceptance, :placeholder => "True or False" %></div>
                </div>
                <div class="row">
                    <div class="col-xs-2">Ranking</div>
                    <div class="col-xs-2"><%= f.number_field :ranking, :placeholder => "Ranking" %></div>
                    <div class="col-xs-2">College ID</div>
                    <div class="hidden col-xs-2"><%= f.number_field :college_id, :value => college.id %></div>
                    <div class="hidden col-xs-2"><%= f.number_field :user_id, :value => current_user.id %></div>
                    <div class="col-xs-2"><%= f.submit "Submit" %></div>
                </div>
                    <% end %>
                </div>
        </li>
    <% end %>
</ul>

   <script>
    console.log("Tesssst");
    $(".hidden").hide();
    $(".container").hide();
    document.getElementById("pop").selectedIndex = "-1";
    $("#pop").on('input',function(){
        // $(".popdown").hide();
        var link = document.createElement("a");
        var divy = document.createElement("div");
        var inputText = document.createElement("input");
        var text = this.value;
        var textNode = document.createTextNode(text);
        link.appendChild(textNode);
        var mainDiv = document.getElementById("div1");
        mainDiv.appendChild(divy);
        divy.appendChild(link);
        divy.appendChild(inputText);
       
        var textClass = "." + text;
        textClass = returnNoSpaces(textClass);
        var aTestClass = returnNoSpaces(text);
        console.log(text);
        var hrefValue = "/colleges/name/";
        hrefValue += encodeURIComponent(text);

        $(link).attr("href",hrefValue);
        $(link).attr("class",aTestClass);
        $(inputText).val(text);
        $(inputText).css("color","red");
        $(inputText).hide();
        var className = "." + aTestClass;
        $(className).show();
    });
    classFinder();
    function classRenamer(word)
    {
        var newString = "";
        for (var i = 10; i < word.length; i ++) 
        {
            newString += word[i];
        }
        return returnNoSpaces(newString);
    }

    function classFinder()
    {
        var containerArray = $('.container');
        containerArray.each(function(index,value){
            var classValue = $(value).attr("class");
            
            console.log(classRenamer(classValue));
            var classAppend = classRenamer(classValue);
            $(value).attr("class","container " + classAppend);
        }) 
    }

    function returnNoSpaces(word)
    {
        var newWord = "";
        for(var i = 0;i < word.length; i ++)
        {
            var currentWord = word[i];
            if(currentWord !== ' ' && currentWord !=='&' && currentWord !=='.')
            {   
                newWord += word[i];  
            }
        }
        return newWord;
    }

   </script>
</body>

